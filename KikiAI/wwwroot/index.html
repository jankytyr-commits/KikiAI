<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KikiAI Chat</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style-inline-buttons.css">
    <link rel="stylesheet" href="css/model-info.css">
    <link rel="stylesheet" href="css/ui-improvements.css">
    <!-- Highlight.js Theme -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <!-- Marked.js & Highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>

<body>
    <div id="menuBar">
        <button class="menuBtn" onclick="repeatLast()">üîÑ Zopakovat p≈ôedchoz√≠</button>
        <button class="menuBtn" onclick="startNewChat()">‚ûï Nov√Ω chat</button>
        <button class="menuBtn" onclick="exportChat()">üíæ Exportovat chat</button>
        <button class="menuBtn" onclick="importChat()">üì• Importovat chat</button>
    </div>

    <!-- Compact Model Bar -->
    <div id="compactModelBar">
        <div class="current-model-info" onclick="openModelSelector()" title="Kliknƒõte pro zmƒõnu modelu">
            <span id="currentModelIcon">‚ú®</span>
            <span id="currentModelName">Gemini 1.5 Flash</span>
            <span id="currentModelStats" class="tokenUsage">0 / 1M</span>
        </div>
        <div class="compact-actions">
            <button class="modelInfoBtn" id="compactInfoBtn" onclick="showModelInfo('gemini')" title="Info">‚ÑπÔ∏è</button>
            <button class="modelSettingsBtn" id="compactSettingsBtn" onclick="openModelSettings('gemini')"
                title="API Key">‚öôÔ∏è</button>
            <button class="changeModelBtn" onclick="openModelSelector()">Vymƒõnit model</button>
        </div>
    </div>

    <!-- Model Selector Modal -->
    <div id="modelSelectorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Vyberte model</h2>
                <button class="closeModal" onclick="closeModelSelector()">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Google Gemini Group -->
                <div class="provider-group">
                    <div class="provider-label">Google Gemini</div>
                    <div class="provider-models">
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="gemini" onclick="selectModel('gemini')">
                                <div class="modelName">Gemini 2.0 Flash</div>
                                <div class="modelStats"><span class="tokenUsage">0</span> / 1M</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('gemini')" title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('gemini')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="gemini-2.0-flash-exp"
                                onclick="selectModel('gemini-2.0-flash-exp')">
                                <div class="modelName">Gemini 2.0 Flash (Exp)</div>
                                <div class="modelStats"><span class="tokenUsage">0</span> / 1M</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('gemini-2.0-flash-exp')"
                                    title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('gemini-2.0-flash-exp')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="gemini-2.0-flash-thinking"
                                onclick="selectModel('gemini-2.0-flash-thinking')">
                                <div class="modelName">Gemini 2.0 Thinking üß†</div>
                                <div class="modelStats"><span class="tokenUsage">0</span> / 32k</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('gemini-2.0-flash-thinking')"
                                    title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn"
                                    onclick="openModelSettings('gemini-2.0-flash-thinking')" title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="gemini-2.5" onclick="selectModel('gemini-2.5')">
                                <div class="modelName">Gemini 1.5 Pro (Old)</div>
                                <div class="modelStats"><span class="tokenUsage">0</span> / 2M</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('gemini-2.5')"
                                    title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('gemini-2.5')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="gemini-1.5-pro"
                                onclick="selectModel('gemini-1.5-pro')">
                                <div class="modelName">Gemini 1.5 Pro</div>
                                <div class="modelStats"><span class="tokenUsage">0</span> / 2M</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('gemini-1.5-pro')"
                                    title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('gemini-1.5-flash')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- OpenAI Group -->
                <div class="provider-group">
                    <div class="provider-label">OpenAI</div>
                    <div class="provider-models">
                        <div class="modelItem">
                            <button class="modelBtn disabled" data-provider="openai" disabled>
                                <div class="modelName">GPT-4o</div>
                                <div class="modelStats">Quota Exceeded</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('openai')" title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('openai')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="openai-test" onclick="selectModel('openai-test')">
                                <div class="modelName">GPT-4o Mini</div>
                                <div class="modelStats"><span class="tokenUsage">0</span> / 128k</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('openai-test')"
                                    title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('openai-test')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Anthropic Claude Group -->
                <div class="provider-group">
                    <div class="provider-label">Anthropic Claude</div>
                    <div class="provider-models">
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="claude" onclick="selectModel('claude')">
                                <div class="modelName">Claude 3 Haiku</div>
                                <div class="modelStats"><span class="tokenUsage">$0.00</span> / $0.25</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('claude')" title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('claude')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="claude-haiku" onclick="selectModel('claude-haiku')">
                                <div class="modelName">Claude 3.5 Haiku</div>
                                <div class="modelStats"><span class="tokenUsage">$0.00</span> / $1.00</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('claude-haiku')"
                                    title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('claude-haiku')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mistral AI Group -->
                <div class="provider-group">
                    <div class="provider-label">Mistral AI</div>
                    <div class="provider-models">
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="mistral" onclick="selectModel('mistral')">
                                <div class="modelName">Mistral Small</div>
                                <div class="modelStats"><span class="tokenUsage">0</span> / 32k</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('mistral')" title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('mistral')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="modelItem">
                            <button class="modelBtn" data-provider="mistral-large"
                                onclick="selectModel('mistral-large')">
                                <div class="modelName">Mistral Large</div>
                                <div class="modelStats"><span class="tokenUsage">0</span> / 128k</div>
                            </button>
                            <div class="modelActions">
                                <button class="modelInfoBtn" onclick="showModelInfo('mistral-large')"
                                    title="Info">‚ÑπÔ∏è</button>
                                <button class="modelSettingsBtn" onclick="openModelSettings('mistral-large')"
                                    title="API Key">‚öôÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="mainContent">
        <div id="chatArea">
            <div id="chat"></div>
            <!-- Typing Indicator Container -->
            <div id="typingIndicator" class="typing-indicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
            <div id="inputArea">
                <div class="inputControls">
                    <button id="searchToggle" class="iconBtn" onclick="toggleSearch()"
                        title="Hledat na webu (Tavily)">üåê</button>
                    <button id="imageUpload" class="iconBtn" onclick="document.getElementById('imageInput').click()"
                        title="Nahr√°t obr√°zek">üì∑</button>
                    <button id="fileUpload" class="iconBtn" onclick="document.getElementById('fileInput').click()"
                        title="P≈ôipojit soubor (PDF, k√≥d, XML...)" style="display:none;">üìé</button>
                    <input type="file" id="imageInput" accept="image/*" style="display:none"
                        onchange="handleImageUpload(event)">
                    <input type="file" id="fileInput"
                        accept=".pdf,.txt,.cs,.js,.ts,.py,.java,.cpp,.c,.h,.xml,.json,.html,.css,.md,.sql,.sh,.bat,.ps1,image/*"
                        style="display:none" onchange="handleFileUpload(event)">
                </div>
                <div id="imagePreview" style="display:none; margin-bottom: 8px;"></div>
                <textarea id="input" rows="3" placeholder="Zadejte zpr√°vu... (Ctrl+Enter pro odesl√°n√≠)"></textarea>
                <button id="send">Odeslat</button>
            </div>
        </div>
        <div id="sidebar">
            <h3>Chats</h3>
            <input id="chatSearch" type="text" placeholder="Hledat chat‚Ä¶" class="search-input"
                oninput="filterChats()" />
            <ul id="sessions"></ul>
            <h3>Notifications</h3>
            <div id="notifications"></div>
        </div>
    </div>

    <!-- API Keys Management Modal -->
    <div id="apiKeysModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Spr√°va API kl√≠ƒç≈Ø</h2>
                <button class="validateAllBtn" onclick="validateAllKeys()">üîÑ Ovƒõ≈ôit
                    v≈°e</button>
                <button class="closeModal" onclick="closeApiKeysModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="keysList"></div>
                <div class="add-key-section">
                    <h3>P≈ôidat nov√Ω kl√≠ƒç</h3>
                    <input type="text" id="newKeyAlias" placeholder="N√°zev kl√≠ƒçe (nap≈ô. 'Hlavn√≠ kl√≠ƒç')" />
                    <input type="text" id="newKeyValue" placeholder="API kl√≠ƒç" />
                    <button onclick="addNewApiKey()">P≈ôidat</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Model Info Modal -->
    <div id="modelInfoModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 id="modelInfoTitle">Model Info</h2>
                <button class="closeModal" onclick="closeModelInfoModal()">√ó</button>
            </div>
            <div class="modal-body" id="modelInfoBody">
                <!-- Content injected by JS -->
            </div>
        </div>
    </div>

    <script src="js/app.js?v=15"></script>
    <script src="js/message-ui.js?v=15"></script>
    <script src="js/chat-helpers.js?v=15"></script>
    <script src="js/chat-search.js?v=15"></script>
    <script src="js/model-info.js?v=15"></script>
    <script src="js/html-preview.js?v=15"></script>
</body>

</html>